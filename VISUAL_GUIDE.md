# Візуальний гайд: Віджет Нової Пошти

## 🎨 Як це виглядає

### До інтеграції:
```
┌─────────────────────────────────────┐
│ Місто:                              │
│ [_____________________________]     │
│                                     │
│ Відділення НП:                      │
│ [_____________________________]     │
└─────────────────────────────────────┘
```
❌ Користувач повинен вручну вводити місто та номер відділення

### Після інтеграції:
```
┌─────────────────────────────────────┐
│ ┌─────────────────────────────────┐ │
│ │ 🔴 Нова Пошта              ▶   │ │
│ │                                 │ │
│ │ Відділення №1                   │ │
│ │ Київ, вул. Хрещатик, 1          │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```
✅ Один клік → відкривається карта з усіма відділеннями

### При натисканні:
```
┌───────────────────────────────────────────────┐
│ Вибрати відділення                        ✕   │
├───────────────────────────────────────────────┤
│                                               │
│  [Пошук міста або відділення...]             │
│                                               │
│  ┌─────────────────────────────────────────┐ │
│  │                                         │ │
│  │         🗺️ КАРТА З ВІДДІЛЕННЯМИ         │ │
│  │                                         │ │
│  │  📍 Відділення №1                       │ │
│  │  📍 Відділення №2                       │ │
│  │  📦 Поштомат №1                         │ │
│  │                                         │ │
│  └─────────────────────────────────────────┘ │
│                                               │
│  Фільтри: [Відділення] [Поштомати] [Всі]    │
│                                               │
└───────────────────────────────────────────────┘
```

## 📱 Мобільна версія

На мобільних пристроях віджет відкривається на весь екран для зручності.

## 🎯 Переваги

### Для користувача:
- ✅ Не потрібно знати номер відділення
- ✅ Можна побачити відділення на карті
- ✅ Можна вибрати найближче відділення
- ✅ Автоматичне визначення міста за геолокацією
- ✅ Пошук за адресою або назвою

### Для адміністратора:
- ✅ Повна інформація про доставку
- ✅ ID відділення для API інтеграції
- ✅ Менше помилок у введенні даних
- ✅ Можливість автоматичного створення ТТН

## 🔧 Технічна реалізація

### Компоненти:
```
src/
├── components/
│   ├── NovaPoshtaWidget.tsx          ← Основний компонент
│   └── README_NovaPoshtaWidget.md    ← Документація
├── app/
│   ├── checkout/
│   │   └── page.tsx                  ← Використання віджету
│   └── admin/
│       └── page.tsx                  ← Відображення даних
└── globals.css                       ← Стилі
```

### База даних:
```sql
orders
├── customer_city              (TEXT)  ← Місто
├── nova_poshta_branch         (TEXT)  ← Назва відділення
├── nova_poshta_warehouse_id   (TEXT)  ← ID для API (НОВЕ)
└── customer_address           (TEXT)  ← Повна адреса
```

## 🚀 Швидкий старт

1. Виконайте SQL міграцію:
```sql
ALTER TABLE orders 
ADD COLUMN IF NOT EXISTS nova_poshta_warehouse_id TEXT;
```

2. Перезапустіть додаток:
```bash
npm run dev
```

3. Перейдіть на сторінку чекауту та протестуйте!

## 📊 Що зберігається

При виборі відділення зберігається:

```json
{
  "city": "Київ",
  "warehouse": "Відділення №1: вул. Хрещатик, 1",
  "warehouseId": "1ec09d88-e1c2-11ec-8fea-0242ac120002",
  "fullAddress": "Київ, вул. Хрещатик, 1"
}
```

## 🎨 Кастомізація

### Зміна кольорів:
Відредагуйте `src/components/NovaPoshtaWidget.tsx`:

```tsx
style={{
    backgroundColor: '#1a1a1a',  // Фон кнопки
    borderColor: '#E2E8F0',      // Колір рамки
    // ...
}}
```

### Зміна тексту:
```tsx
<span>Обрати відділення або поштомат</span>
// Змініть на свій текст
```

## 🔗 Корисні посилання

- [Офіційна документація НП](https://developers.novaposhta.ua/)
- [API Нової Пошти](https://developers.novaposhta.ua/documentation)
- [Інструкція з інтеграції](https://developers.novaposhta.ua/pages/instrukciya-z-integraciyi-widget-viboru-pidrozdilu-dostavki)
