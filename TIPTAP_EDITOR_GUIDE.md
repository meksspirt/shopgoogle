# Novel Rich Text Editor - Руководство

## Что изменилось

Редактор описания продукта заменен на **Novel** - современный AI-подобный редактор на базе Tiptap с интуитивным интерфейсом и богатыми возможностями форматирования.

## Где используется

- **Админ-панель** - при создании нового продукта
- **Модальное окно редактирования** - при редактировании существующего продукта
- **Страница товара** - описание отображается с HTML форматированием

## Возможности редактора

Novel предоставляет интуитивный интерфейс с всплывающим меню (bubble menu) при выделении текста:

### Форматирование текста
- **Жирный** - Выделите текст и нажмите на кнопку Bold
- **Курсив** - Italic
- **Зачеркнутый** - Strikethrough
- **Код** - Inline code
- **Ссылка** - Добавить гиперссылку

### Заголовки
- **H1** - Заголовок первого уровня
- **H2** - Заголовок второго уровня
- **H3** - Подзаголовок третьего уровня

### Списки
- **Маркированный список** - Bullet list
- **Нумерованный список** - Numbered list
- **Чек-лист** - Task list с галочками

### Специальные блоки
- **Цитата** - Blockquote для выделения важных фрагментов
- **Код блок** - Code block для технического контента
- **Разделитель** - Horizontal rule

### Slash команды
Введите `/` в редакторе для быстрого доступа к командам:
- `/h1`, `/h2`, `/h3` - Заголовки
- `/bullet` - Маркированный список
- `/number` - Нумерованный список
- `/quote` - Цитата
- `/code` - Код блок

## Как использовать

### Создание нового продукта

1. Перейдите в админ-панель
2. В форме "Додати новий товар" найдите поле "Опис"
3. Используйте панель инструментов для форматирования текста
4. HTML код сохраняется автоматически

### Редактирование продукта

1. Нажмите "Редагувати" на карточке товара
2. В модальном окне найдите поле "Опис"
3. Редактируйте текст с форматированием
4. Нажмите "Зберегти зміни"

## Примеры использования

### Создание списка преимуществ

```
Переваги цієї книги:
• Написана професійним психологом
• Містить практичні вправи
• Підходить для самостійної роботи
```

### Добавление заголовков

```
Про книгу

Ця книга допоможе вам...

Для кого ця книга

Книга підійде тим, хто...
```

### Форматирование важной информации

```
**Важливо:** Книга доступна для передзамовлення

*Очікувана дата надходження: грудень 2024*
```

## Технические детали

### Установленные пакеты
- `@tiptap/react` - React интеграция
- `@tiptap/starter-kit` - Базовые расширения
- `@tiptap/extension-link` - Поддержка ссылок
- `@tiptap/extension-underline` - Подчеркивание
- `@tiptap/extension-text-align` - Выравнивание текста

### Файлы
- `src/components/TiptapEditor.tsx` - Компонент редактора
- `src/app/globals.css` - Стили редактора и отображения
- `src/app/admin/page.tsx` - Использование в админке
- `src/components/EditProductModal.tsx` - Использование в модалке
- `src/app/product/[id]/page.tsx` - Отображение на странице товара

### Хранение данных

Описание сохраняется в базе данных как HTML:
```html
<p>Це <strong>чудова</strong> книга про <em>психологію</em>.</p>
<ul>
  <li>Пункт 1</li>
  <li>Пункт 2</li>
</ul>
```

### Безопасность

Используется `dangerouslySetInnerHTML` для рендеринга HTML на странице товара. Это безопасно, так как:
- Контент создается только администраторами
- Tiptap санитизирует HTML автоматически
- Нет пользовательского ввода на фронтенде

## Стилизация

Редактор адаптирован под оба дизайна:
- **Clinical Focus** - бирюзовые акценты
- **Academic Paper** - синие акценты
- **Dark theme** - для админ-панели

## Troubleshooting

### Редактор не отображается
- Проверьте консоль браузера на ошибки
- Убедитесь, что все пакеты установлены: `npm install`

### Форматирование не сохраняется
- Проверьте, что используется `onChange` с HTML
- Убедитесь, что в базе данных поле `description` имеет тип `text`

### Старые описания отображаются неправильно
- Старые текстовые описания будут отображаться как обычный текст
- Отредактируйте их через новый редактор для добавления форматирования
