# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è Supabase Auth

## üìã –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º

- [ ] –ü—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Vercel + Supabase
- [ ] –ï—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ Supabase Dashboard
- [ ] –ï—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ SQL Editor –≤ Supabase
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `@supabase/supabase-js` (—É–∂–µ –µ—Å—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ)

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

- [ ] –û—Ç–∫—Ä—ã—Ç Supabase Dashboard
- [ ] –û—Ç–∫—Ä—ã—Ç SQL Editor
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –∫–æ–¥ –∏–∑ `supabase/setup_auth_profiles.sql`
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω SQL —Å–∫—Ä–∏–ø—Ç (–Ω–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ "Run")
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã `profiles`:
  ```sql
  SELECT * FROM public.profiles LIMIT 1;
  ```
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞:
  ```sql
  SELECT * FROM pg_trigger WHERE tgname = 'on_auth_user_created';
  ```

## üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase Auth

- [ ] –û—Ç–∫—Ä—ã—Ç —Ä–∞–∑–¥–µ–ª Authentication ‚Üí Providers
- [ ] Email –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤–∫–ª—é—á–µ–Ω
- [ ] –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: –æ—Ç–∫–ª—é—á–µ–Ω "Confirm email"
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è

## üë§ –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

- [ ] –û—Ç–∫—Ä—ã—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/admin/login` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- [ ] –ü–µ—Ä–µ—à–ª–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è"
- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –∞–∫–∫–∞—É–Ω—Ç —Å –≤–∞—à–∏–º email
- [ ] –û—Ç–∫—Ä—ã—Ç Supabase SQL Editor
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞:
  ```sql
  UPDATE public.profiles 
  SET is_admin = TRUE 
  WHERE email = '–≤–∞—à-email@example.com';
  ```
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:
  ```sql
  SELECT email, is_admin FROM public.profiles WHERE email = '–≤–∞—à-email@example.com';
  ```
  –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å `is_admin = true`

### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ Supabase Dashboard

- [ ] –û—Ç–∫—Ä—ã—Ç Authentication ‚Üí Users
- [ ] –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ "Add user"
- [ ] –°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å email –∏ –ø–∞—Ä–æ–ª–µ–º
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–∞ SQL –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ is_admin = TRUE

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] –û—Ç–∫—Ä—ã—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/admin/login`
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω –≤—Ö–æ–¥ —Å email –∏ –ø–∞—Ä–æ–ª–µ–º
- [ ] –£—Å–ø–µ—à–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/admin`
- [ ] –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í–∏–¥–Ω—ã –∑–∞–∫–∞–∑—ã, —Ç–æ–≤–∞—Ä—ã, –ø—Ä–æ–º–æ–∫–æ–¥—ã
- [ ] –ö–Ω–æ–ø–∫–∞ "–í–∏–π—Ç–∏" —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/admin/login`
- [ ] –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–∫—Ä—ã—Ç—å `/admin` –±–µ–∑ –≤—Ö–æ–¥–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ `/admin/login`

## üîí –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- [ ] –û—Ç–∫—Ä—ã—Ç DevTools ‚Üí Console
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- [ ] –û—Ç–∫—Ä—ã—Ç DevTools ‚Üí Network
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –∫ Supabase (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å —Ç–æ–∫–µ–Ω–æ–º)
- [ ] –û—Ç–∫—Ä—ã—Ç DevTools ‚Üí Application ‚Üí Cookies
- [ ] –ï—Å—Ç—å cookie `sb-*-auth-token`
- [ ] –ü–æ–ø—ã—Ç–∫–∞ –≤–æ–π—Ç–∏ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É
- [ ] –ü–æ–ø—ã—Ç–∫–∞ –≤–æ–π—Ç–∏ —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º email - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ RLS –ø–æ–ª–∏—Ç–∏–∫

- [ ] –û—Ç–∫—Ä—ã—Ç Supabase SQL Editor
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–∏—Ç–∏–∫:
  ```sql
  SELECT tablename, policyname, cmd, qual 
  FROM pg_policies 
  WHERE tablename IN ('orders', 'products', 'promo_codes', 'profiles');
  ```
- [ ] –ü–æ–ª–∏—Ç–∏–∫–∏ —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- [ ] RLS –≤–∫–ª—é—á–µ–Ω:
  ```sql
  SELECT tablename, rowsecurity 
  FROM pg_tables 
  WHERE tablename IN ('orders', 'products', 'promo_codes', 'profiles');
  ```
  –í—Å–µ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å `rowsecurity = true`

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Vercel

- [ ] –ö–æ–¥ –∑–∞–∫–æ–º–º–∏—á–µ–Ω –≤ Git
- [ ] –ó–∞–ø—É—à–µ–Ω –Ω–∞ GitHub/GitLab
- [ ] Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- [ ] –í—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- [ ] –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [ ] –ü—Ä–æ—á–∏—Ç–∞–Ω `QUICK_START_AUTH.md`
- [ ] –ü—Ä–æ—á–∏—Ç–∞–Ω `SUPABASE_AUTH_SETUP.md`
- [ ] –û–∑–Ω–∞–∫–æ–º–ª–µ–Ω—ã —Å `AUTH_EXAMPLES.md`
- [ ] –û–∑–Ω–∞–∫–æ–º–ª–µ–Ω—ã —Å `AUTH_FAQ.md`
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω `README.md` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å —Å—Ç–∞—Ä—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã)

- [ ] –ü—Ä–æ—á–∏—Ç–∞–Ω `supabase/migrate_old_admins.sql`
- [ ] –°–æ–∑–¥–∞–Ω—ã –Ω–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∞ is_admin –¥–ª—è –≤—Å–µ—Ö
- [ ] –í—Å–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –≤–æ–π—Ç–∏
- [ ] (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –£–¥–∞–ª–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞ `admins`

## üéØ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

- [ ] –í—Å–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –≤–æ–π—Ç–∏
- [ ] –û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –≤–æ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- [ ] –î–∞–Ω–Ω—ã–µ –∑–∞—â–∏—â–µ–Ω—ã RLS –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏
- [ ] Middleware —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö Supabase
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö Vercel

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `AUTH_FAQ.md` - —Ç–∞–º —Ä–µ—à–µ–Ω–∏—è —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard ‚Üí Logs
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - `SUPABASE_SERVICE_ROLE_KEY`

## ‚ú® –ì–æ—Ç–æ–≤–æ!

–ï—Å–ª–∏ –≤—Å–µ –ø—É–Ω–∫—Ç—ã –æ—Ç–º–µ—á–µ–Ω—ã - –≤–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –∑–∞—â–∏—â–µ–Ω–∞! üéâ

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å:
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt)
- ‚úÖ –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î (RLS)
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- ‚úÖ Middleware –∑–∞—â–∏—Ç–∞
- ‚úÖ –ì–æ—Ç–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
